import cv2
import matplotlib.pyplot as plt

# Start the webcams
cap1=cv2.VideoCapture(0)
cap2=cv2.VideoCapture(1)

#Check if the webcams is opened correctly, a message will be displayed corresponding to opening status of both the webcams
if not cap1.isOpened():
    raise IOError("Cannot open WebCam1")
else:
    print('Opening WebCam1')
if not cap2.isOpened():
    raise IOError("Cannot open WebCam2")
else:
    print('Opening WebCam2')

i=0
s='00000'

while True: # Run an infinite loop which will terminate upon eyboard interupt
    # Ret returns a boolean value indicating whether a frame has been recorded or not, Ture implies a frame has been recorded, vice versa for False
    # Frame records the image/ video from the webcam
    ret1,frame1=cap1.read()
    ret2,frame2=cap2.read()
    # The frame from the webcam will get displayed on screen
    if ret1:
        a=(int)(s)+(int)(i/2+1)
        filename=(str)(a)+'_1'
        print(filename)
        frame1=frame1[90:410,:] # To remove unnecessary backgroud from the frames
        plt.imshow(frame1)
        plt.show()
        i+=1
        #cv2.imwrite(filename,frame1) # Frame saved to C drive
    else:
        print('No frame captured')
    if ret2:
        a=(int)(s)+(int)(i/2+1)
        filename=(str)(a)+'_0'
        print(filename)
        frame2=frame2[90:410,:] # To remove unnecessary backgroud from the frames
        plt.imshow(frame2)
        plt.show()
        i+=1
        #cv2.imwrite(filename,frame2) # Frame saved to C drive
    else:
        print('No frame captured')
    
    key=cv2.waitKey(1)
    if key==27 & 0xFF==ord('q'):
        break

cap1.release()
print("Closing WebCam 1")
cap2.release()
print("Closing WebCam 2")
